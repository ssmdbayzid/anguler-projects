<div class="carousel-container">
  <div
    #carouselWrapper
    class="carousel-wrapper"
    [ngStyle]="{ transform: 'translateX(-' + (currentSlideIndex + 1) * 100 + '%)' }"
  >
    <!-- Clone the last slide at the beginning -->
    <div class="carousel-slide">
      <img [src]="isMobile < 600 && slides[slides.length - 1]?.images[1] ? slides[slides.length - 1]?.images[1] : slides[slides.length - 1]?.images[0]" alt="Slide" />
      <!--      <img-->
      <!--        [ngSrc]="(isMobile < 600 && slides[slides.length - 1]?.images[1] ? slides[slides.length - 1]?.images[1] : slides[slides.length - 1]?.images[0]) | imgCtrl : 'filename'"-->
      <!--        [width]="(isMobile < 600 && slides[slides.length - 1]?.images[1] ? slides[slides.length - 1]?.images[1] : slides[slides.length - 1]?.images[0]) | imgCtrl : 'width'"-->
      <!--        [height]="(isMobile < 600 && slides[slides.length - 1]?.images[1] ? slides[slides.length - 1]?.images[1] : slides[slides.length - 1]?.images[0]) | imgCtrl : 'height'"-->
      <!--        [alt]="'Slide 1'"-->
      <!--        [ngSrcset]="rawSrcset"-->
      <!--        sizes="(max-width: 599px) 384px, (min-width: 600px) 1200px"-->
      <!--      />-->
    </div>

    <!-- Original slides -->
    @for(slide of slides; track $index){
      <div class="carousel-slide" >
        <img [src]="isMobile < 600 && slide?.images[1] ? slide?.images[1] : slide?.images[0]" alt="Slide" />
        <!--        <img-->
        <!--          [ngSrc]="(isMobile < 600 && slide?.images[1] ? slide?.images[1] : slide?.images[0]) | imgCtrl : 'filename'"-->
        <!--          [width]="(isMobile < 600 && slide?.images[1] ? slide?.images[1] : slide?.images[0]) | imgCtrl : 'width'"-->
        <!--          [height]="(isMobile < 600 && slide?.images[1] ? slide?.images[1] : slide?.images[0]) | imgCtrl : 'height'"-->
        <!--          [alt]="slide?.name"-->
        <!--          [ngSrcset]="rawSrcset"-->
        <!--          sizes="(max-width: 599px) 384px, (min-width: 600px) 1200px"-->
        <!--        />-->
      </div>
    }


    <!-- Clone the first slide at the end -->
    <div class="carousel-slide">
      <img [src]="isMobile < 600 && slides[0]?.images[1] ? slides[0]?.images[1] : slides[0]?.images[0]" alt="Slide" />
      <!--      <img-->
      <!--        [ngSrc]="(isMobile < 600 && slides[0]?.images[1] ? slides[0]?.images[1] : slides[0]?.images[0]) | imgCtrl : 'filename'"-->
      <!--        [width]="(isMobile < 600 && slides[0]?.images[1] ? slides[0]?.images[1] : slides[0]?.images[0]) | imgCtrl : 'width'"-->
      <!--        [height]="(isMobile < 600 && slides[0]?.images[1] ? slides[0]?.images[1] : slides[0]?.images[0]) | imgCtrl : 'height'"-->
      <!--        [alt]="'Slide'"-->
      <!--        [ngSrcset]="rawSrcset"-->
      <!--        sizes="(max-width: 599px) 384px, (min-width: 600px) 1200px"-->
      <!--      />-->
    </div>
  </div>

  <!-- Control buttons -->
  @if(showControls){
    <button  class="carousel-control prev" (click)="prevSlide()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="20px"
        viewBox="0 0 24 24"
        width="16px"
        fill="#FFFFFF"
      >
        <g><path d="M0,0h24v24H0V0z" fill="none" /></g>
        <g><path d="M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z" /></g>
      </svg>
    </button>
  }
  @if(showControls){
    <button class="carousel-control next" (click)="nextSlide()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="20px"
        viewBox="0 0 24 24"
        width="16px"
      >
        <g><path d="M0,0h24v24H0V0z" fill="none" /></g>
        <g><polygon points="6.23,20.23 8,22 18,12 8,2 6.23,3.77 14.46,12" /></g>
      </svg>
    </button>
  }

  <!-- Indicators -->
  @if (showIndicators) {
    <div class="carousel-indicators">
      @for (_ of slides; let i = $index; track i) {
        <span
          class="indicator"
          [class.active]="i === currentSlideIndex"
          (click)="goToSlide(i)"
        ></span>
      }
    </div>
  }
</div>
